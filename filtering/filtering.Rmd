---
title: "Logical Vectors and `filter()`"
output: 
    learnr::tutorial:
        theme: "default"
runtime: shiny_prerendered
bibliography: references.bib
---

```{r setup, include=FALSE}
library(learnr)
library(dplyr)
library(ggplot2)
library(knitr)
library(kableExtra)
knitr::opts_chunk$set(echo = FALSE)

movies<-read.csv('data/Top_200_movies_cleaned.csv',header = T)
tweets<-read.csv('data/twcs_small_clean.csv', header = T)
genes<-read.csv('data/exampleData.csv',header = T)
```

## Introduction to filtering rows
It is often the case that our data sets will contain *more* observations than we actually need for a given task or analysis.^[Being able to remove rows from view or consideration is also a very important skill for *cleaning* data and for *exploring* data.]  Hence, we will often want to remove rows from a data frame before doing our work. 

> We refer to the process of removing rows from a data frame as ***filtering rows***.^[We mainly use the "filtering rows" language to remind us of the `filter()` command we will use from the `dplyr` package.]

For example, suppose we have a data set of all the movies released in the past 10 years. *However*, we intend to study only the movies released in the past two years.  Before doing our work, we would need to remove the movies in the data set that were released outside of the appropriate time period for our study.

In `R`, we can choose the rows we want to keep by either 

* listing the *row numbers* we want, or
* identifying desired rows using *logical vectors*.

We will introduce both approaches, but focus on the second.  Moreover, there are two syntaxes that we can use in `R`:

* The syntax used in base `R`, and
* A more readable approach using the `filter()` command from `dplyr` (@dplyr).

For our money, the best approach (because it makes most sense to humans) is to use logical vectors in combination with the `filter()` command. So this will be the main goal of the lesson!

To explore and practice *filtering with rows*, we will use three data sets:

* `tweets`: a smaller, cleaned version of a data set of tweets from Kaggle (@tweet_data)
* `movies`: a data frame of the top 200 grossing movies from 2023, also from Kaggle (@TopMovies2023)
* `genes`: an example data set of genome information (Source???)

#### Let's get started!

## Base `R` filtering
less readable

`df[row_nums, ]`

Quick mention of numerical comparisons, %in%, and grepl

`df[logical_vector, ]`

## Using `filter()` from `dplyr` package

## Application and Review:

## Conclusions
Notes, comments, summaries.

Links to related exercises and resources.


## References
<div id="refs"></div>


***

## Example exercises


### Exercise 

*Here's a simple exercise with an empty code chunk provided for entering the answer.*

Write the R code required to add two plus two:

```{r two-plus-two, exercise=TRUE}

```

### Exercise with Code

*Here's an exercise with some prepopulated code as well as `exercise.lines = 5` to provide a bit more initial room to work.*

Now write a function that adds any two numbers and then call it:

```{r add-function, exercise=TRUE, exercise.lines = 5}
add <- function() {
  
}
```

## Topic 2

### Exercise with Hint

*Here's an exercise where the chunk is pre-evaluated via the `exercise.eval` option (so the user can see the default output we'd like them to customize). We also add a "hint" to the correct solution via the chunk immediate below labeled `print-limit-hint`.*

Modify the following code to limit the number of rows printed to 5:

```{r print-limit, exercise=TRUE, exercise.eval=TRUE}
mtcars
```

```{r print-limit-hint}
head(mtcars)
```


### Shiny Example
```{r, echo=FALSE}
sliderInput("bins", "Number of bins:", min = 1, max = 50, value = 30)
plotOutput("distPlot")
```

```{r, context="server"}
output$distPlot <- renderPlot({
  x <- faithful[, 2]  # Old Faithful Geyser data
  bins <- seq(min(x), max(x), length.out = input$bins + 1)
  hist(x, breaks = bins, col = 'darkgray', border = 'white')
})
```

### Quiz

*You can include any number of single or multiple choice questions as a quiz. Use the `question` function to define a question and the `quiz` function for grouping multiple questions together.*

Some questions to verify that you understand the purposes of various base and recommended R packages:

```{r quiz}
quiz(
  question("Which package contains functions for installing other R packages?",
    answer("base"),
    answer("tools"),
    answer("utils", correct = TRUE),
    answer("codetools")
  ),
  question("Which of the R packages listed below are used to create plots?",
    answer("lattice", correct = TRUE),
    answer("tools"),
    answer("stats"),
    answer("grid", correct = TRUE)
  )
)
```

